         <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .form-container {
            padding: 40px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        /* File Upload Styling */
        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .file-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-label {
            display: block;
            padding: 15px;
            border: 2px dashed #667eea;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9ff;
        }
        
        .file-label:hover {
            background: #e8f0ff;
            border-color: #5a67d8;
        }
        
        .file-info {
            margin-top: 10px;
            padding: 10px;
            background: #e8f5e8;
            border-radius: 8px;
            display: none;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Chat Widget Styles */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .chat-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        
        .chat-toggle:hover {
            transform: scale(1.1);
        }
        
        .chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 15px 15px 0 0;
            text-align: center;
            font-weight: 600;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            max-height: 350px;
        }
        
        .chat-input-container {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .chat-send {
            padding: 10px 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 80%;
        }
        
        .message.user {
            background: #667eea;
            color: white;
            margin-left: auto;
            text-align: right;
        }
        
        .message.bot {
            background: #f1f3f4;
            color: #333;
        }
        
        .status-message {
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-weight: 600;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header, .form-container {
                padding: 20px;
            }
            
            .chat-window {
                width: 300px;
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí¨ Contact Us</h1>
            <p>Get in touch with file uploads and live chat support!</p>
        </div>
        
        <div class="form-container">
            <form id="contactForm">
                <div class="form-group">
                    <label for="name">üë§ Full Name *</label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">üìß Email Address *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="subject">üìù Subject *</label>
                    <select id="subject" name="subject" required>
                        <option value="">Select a topic...</option>
                        <option value="General Inquiry">General Inquiry</option>
                        <option value="Technical Support">Technical Support</option>
                        <option value="Sales Question">Sales Question</option>
                        <option value="Bug Report">Bug Report</option>
                        <option value="Feature Request">Feature Request</option>
                        <option value="Partnership">Partnership</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="message">üí¨ Message *</label>
                    <textarea id="message" name="message" placeholder="Tell us how we can help you..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label>üìé Attach Files (Optional)</label>
                    <div class="file-upload">
                        <input type="file" id="fileInput" class="file-input" multiple accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif">
                        <label for="fileInput" class="file-label">
                            <div>üìÅ Click to select files or drag & drop</div>
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">
                                Supported: PDF, DOC, TXT, Images (Max 5MB each)
                            </div>
                        </label>
                    </div>
                    <div id="fileInfo" class="file-info"></div>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    üöÄ Send Message
                </button>
            </form>
            
            <div id="statusMessage"></div>
        </div>
    </div>
    
    <!-- Live Chat Widget -->
    <div class="chat-widget">
        <button class="chat-toggle" id="chatToggle">üí¨</button>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                üí¨ Live Chat Support
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    üëã Hi! I'm here to help. Ask me anything or use the contact form for detailed inquiries.
                </div>
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your message...">
                <button class="chat-send" id="chatSend">Send</button>
            </div>
        </div>
    </div>

    <script>
        // File upload handling
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        let selectedFiles = [];

        fileInput.addEventListener('change', function(e) {
            selectedFiles = Array.from(e.target.files);
            displayFileInfo();
        });

        function displayFileInfo() {
            if (selectedFiles.length === 0) {
                fileInfo.style.display = 'none';
                return;
            }

            let html = '<strong>üìé Selected Files:</strong><br>';
            selectedFiles.forEach((file, index) => {
                const size = (file.size / 1024 / 1024).toFixed(2);
                html += `<div style="margin: 5px 0;">
                    ${file.name} (${size} MB)
                    <button type="button" onclick="removeFile(${index})" style="margin-left: 10px; color: red; background: none; border: none; cursor: pointer;">‚ùå</button>
                </div>`;
            });
            
            fileInfo.innerHTML = html;
            fileInfo.style.display = 'block';
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            displayFileInfo();
        }

        // Chat widget functionality
        const chatToggle = document.getElementById('chatToggle');
        const chatWindow = document.getElementById('chatWindow');
        const chatInput = document.getElementById('chatInput');
        const chatSend = document.getElementById('chatSend');
        const chatMessages = document.getElementById('chatMessages');

        chatToggle.addEventListener('click', function() {
            if (chatWindow.style.display === 'flex') {
                chatWindow.style.display = 'none';
                chatToggle.innerHTML = 'üí¨';
            } else {
                chatWindow.style.display = 'flex';
                chatToggle.innerHTML = '‚ùå';
            }
        });

        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendChatMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            chatInput.value = '';

            // Simple bot responses
            setTimeout(() => {
                const responses = [
                    "Thanks for your message! For detailed support, please use our contact form.",
                    "I understand. Our team will get back to you soon if you submit the contact form.",
                    "That's a great question! Please fill out the contact form for a detailed response.",
                    "I'm here to help! For complex issues, our contact form ensures you get the best support.",
                    "Got it! Use the contact form to attach files or provide more details."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addMessage(randomResponse);
            }, 1000);
        }

        chatSend.addEventListener('click', sendChatMessage);
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        });

        // Form submission with file upload
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const statusMessage = document.getElementById('statusMessage');
            
            // Disable submit button
            submitBtn.disabled = true;
            submitBtn.innerHTML = '‚è≥ Sending...';
            
            try {
                // Prepare form data
                const formData = {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    subject: document.getElementById('subject').value,
                    message: document.getElementById('message').value,
                    files: []
                };

                // Handle file uploads
                if (selectedFiles.length > 0) {
                    statusMessage.innerHTML = '<div class="status-message">üìé Uploading files...</div>';
                    
                    for (let file of selectedFiles) {
                        // Convert file to base64
                        const base64 = await fileToBase64(file);
                        formData.files.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            data: base64
                        });
                    }
                }

                // Submit form
                const response = await fetch('https://xb5f9g079i.execute-api.eu-north-1.amazonaws.com/default/contactForm', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (result.success) {
                    statusMessage.innerHTML = `
                        <div class="status-message success">
                            ‚úÖ Message sent successfully! 
                            ${result.submission_id ? `Submission ID: ${result.submission_id}` : ''}
                            ${selectedFiles.length > 0 ? `<br>üìé ${selectedFiles.length} file(s) uploaded` : ''}
                        </div>
                    `;
                    
                    // Reset form
                    document.getElementById('contactForm').reset();
                    selectedFiles = [];
                    displayFileInfo();
                    
                } else {
                    throw new Error(result.message || 'Unknown error');
                }

            } catch (error) {
                statusMessage.innerHTML = `
                    <div class="status-message error">
                        ‚ùå Error: ${error.message}
                    </div>
                `;
            } finally {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'üöÄ Send Message';
            }
        });

        // Helper function to convert file to base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
            });
        }
    </script>
</body>
</html>
